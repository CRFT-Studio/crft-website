---
import HeadScripts from "../components/HeadScripts.astro";
import Navigation from "../components/Navigation.astro";
import Footer from "../components/Footer.astro";
import GlossaryNav from "../components/GlossaryNav.astro";
import TableOfContents from "../components/TableOfContents.astro";

const {frontmatter, headings} = Astro.props;

// make internal linking dynamic, and done at build time
// sidebar letter highlighting
// article recommendations
// search/fitlering
---

<html lang="en">
    <head>
        <HeadScripts
        title={`${frontmatter.title} | CRFT Glossary`}
        description={`${frontmatter.description} | CRFT Glossary`}
        />
    </head>

    <body>
        <Navigation/>
        <section class="my-20">
            <div class="container">
                <div class="lg:grid lg:grid-cols-[0.25fr_1fr] gap-14">
                    <div>
                        <div class="sticky top-24 mt-2">
                        <aside id="sidebar" class="sticky top-24 mt-2">
                            <a href="/glossary" class="font-normal text-neutral-300 lg:block hidden hover:text-neutral-100">‚Üê Glossary</a>
                            <div id="toc" class="">
                                <TableOfContents headings={headings} levels={3} />
                            </div>
                        </aside>
                    </div>
                    <div>
                        <GlossaryNav highlightedLetter={frontmatter.term[0]}/>
                        <article class="lg:p-10 p-5 rounded-sm border border-neutral-700 shadow-md mt-3">
                            <a href="/glossary" class="text-neutral-400 hover:underline">The Web Design Glossary</a>
                            <h1 class="lg:text-5xl text-4xl font-serif font-semibold leading-normal mb-3 mt-3">{frontmatter.term}</h1>
                            <div class="text-lg mb-8">{frontmatter.pronunciation}</div>
                            <div class="blog-content">
                                <slot/>
                            </div>
                        </article>
                    </div>
                </div>
            </div>
        </section>
        <Footer/>
        <script>
        import $ from 'jquery';
        
        const moveTocOnMobile = () => {
            if ($(window).width() < 1024) {
                $("#toc").insertBefore("h2:first");
            } else {
                $("#toc").appendTo("#sidebar");
            }
        };

        $(document).ready(moveTocOnMobile);
        $(window).resize(moveTocOnMobile);
        </script>
    </body>
</html>
